hostname GYARTAS_R

ip access-list extended GUEST-ISOLATE
deny ip 10.3.200.0 0.0.0.255 10.3.0.0 0.0.255.255
permit ip 10.3.200.0 0.0.0.255 any
ip access-list extended ADMIN-PROTECT
permit ip 10.3.10.0 0.0.0.255 10.3.150.0 0.0.0.255
deny ip any 10.3.150.0 0.0.0.255 
permit ip any any
ip access-list extended INTERBUILDING-OUT
permit ip 10.3.10.0 0.0.0.255 10.4.150.0 0.0.0.255
permit ip 10.3.30.0 0.0.0.255 10.4.0.0 0.0.255.255
permit ip 10.3.40.0 0.0.0.255 10.4.40.0 0.0.0.255
permit ip 10.3.90.0 0.0.0.255 10.4.90.0 0.0.0.255
deny ip 10.3.0.0 0.0.255.255 10.4.0.0 0.0.255.255 log
permit ip any any

int gig0/0
description TermelesR_Fele
ip address 192.168.2.2 255.255.255.252
ip ospf message-digest-key 1 md5 jelszo
ip ospf authentication message-digest
ip ospf network point-to-point
no sh

int se0/0/0
description CsomagolasR_Fele
ip address 192.168.1.1 255.255.255.252
ip ospf message-digest-key 3 md5 jelszo
ip ospf authentication message-digest
ip ospf network point-to-point
ip access-group INTERBUILDING-OUT out
no sh

int gig0/1
description IT_SW_FELE
no sh
int gig0/1.999
encapsulation dot1q 999 native
int gig0/1.200
ip helper-address 10.3.10.5
encapsulation dot1q 200
ip address 10.3.200.1 255.255.255.0
ip access-group GUEST-ISOLATE in
int gig0/1.150
ip helper-address 10.3.10.5
encapsulation dot1q 150
ip address 10.3.150.1 255.255.255.0
ip access-group ADMIN-PROTECT in

int gig0/1.10
ip helper-address 10.3.10.5
encapsulation dot1q 10
ip address 10.3.10.1 255.255.255.0
ip access-group ADMIN-PROTECT in
int gig0/1.20
ip helper-address 10.3.10.5
encapsulation dot1q 20
ip address 10.3.20.1 255.255.255.0
ip access-group ADMIN-PROTECT in
int gig0/1.30
ip helper-address 10.3.10.5
encapsulation dot1q 30
ip address 10.3.30.1 255.255.255.0
ip access-group ADMIN-PROTECT in
int gig0/1.40
ip helper-address 10.3.10.5
encapsulation dot1q 40
ip address 10.3.40.1 255.255.255.0
ip access-group ADMIN-PROTECT in
int gig0/1.50
ip helper-address 10.3.10.5
encapsulation dot1q 50
ip address 10.3.50.1 255.255.255.0
ip access-group ADMIN-PROTECT in
int gig0/1.60
ip helper-address 10.3.10.5
encapsulation dot1q 60
ip address 10.3.60.1 255.255.255.0
ip access-group ADMIN-PROTECT in
int gig0/1.70
ip helper-address 10.3.10.5
encapsulation dot1q 70
ip address 10.3.70.1 255.255.255.0
ip access-group ADMIN-PROTECT in
int gig0/1.90
ip helper-address 10.3.10.5
encapsulation dot1q 90
ip address 10.3.90.1 255.255.255.0
ip access-group ADMIN-PROTECT in

router ospf 1
router-id 2.2.2.2
passive-interface default
no passive-interface gig0/0
no passive-interface se0/0/0
network 192.168.1.0 0.0.0.3 area 0
network 192.168.2.0 0.0.0.3 area 0
network 10.3.0.0 0.0.255.255 area 0